(function(){function t(){}function r(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function e(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,i=this,o=i.EventEmitter;n.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t)for(n in e={},i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n]);else e=i[t]||(i[t]=[]);return e},n.flattenListeners=function(t){var e,n=[];for(e=0;t.length>e;e+=1)n.push(t[e].listener);return n},n.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},n.addListener=function(t,e){var n,i=this.getListenersAsObject(t),o="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],e)&&i[n].push(o?e:{listener:e,once:!1});return this},n.on=e("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=e("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,e){var n,i,o=this.getListenersAsObject(t);for(i in o)o.hasOwnProperty(i)&&(-1!==(n=r(o[i],e))&&o[i].splice(n,1));return this},n.off=e("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,n){var i,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)r.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(o=e[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},n.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},n.removeAllListeners=e("removeEvent"),n.emitEvent=function(t,e){var n,i,o,r=this.getListenersAsObject(t);for(o in r)if(r.hasOwnProperty(o))for(i=r[o].length;i--;)!0===(n=r[o][i]).once&&this.removeListener(t,n.listener),n.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},n.trigger=e("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return i.EventEmitter=o,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(n){function i(t){var e=n.event;return e.target=e.target||e.srcElement||t,e}var t=document.documentElement,e=function(){};t.addEventListener?e=function(t,e,n){t.addEventListener(e,n,!1)}:t.attachEvent&&(e=function(e,t,n){e[t+n]=n.handleEvent?function(){var t=i(e);n.handleEvent.call(n,t)}:function(){var t=i(e);n.call(e,t)},e.attachEvent("on"+t,e[t+n])});var o=function(){};t.removeEventListener?o=function(t,e,n){t.removeEventListener(e,n,!1)}:t.detachEvent&&(o=function(e,n,i){e.detachEvent("on"+n,e[n+i]);try{delete e[n+i]}catch(t){e[n+i]=void 0}});var r={bind:e,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",r):n.eventie=r}(this),function(n,i){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(t,e){return i(n,t,e)}):"object"==typeof exports?module.exports=i(n,require("wolfy87-eventemitter"),require("eventie")):n.imagesLoaded=i(n,n.EventEmitter,n.eventie)}(window,function(t,e,n){function o(t,e){for(var n in e)t[n]=e[n];return t}function r(t){var e,n=[];if(e=t,"[object Array]"===d.call(e))n=t;else if("number"==typeof t.length)for(var i=0,o=t.length;i<o;i++)n.push(t[i]);else n.push(t);return n}function s(t,e,n){if(!(this instanceof s))return new s(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=o({},this.options),"function"==typeof e?n=e:o(this.options,e),n&&this.on("always",n),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var i=this;setTimeout(function(){i.check()})}function i(t){this.img=t}function a(t){this.src=t,p[t]=this}var u=t.jQuery,c=t.console,f=void 0!==c,d=Object.prototype.toString;(s.prototype=new e).options={},s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;t<e;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var o=n.querySelectorAll("img"),r=0,s=o.length;r<s;r++){var a=o[r];this.addImage(a)}}},s.prototype.addImage=function(t){var e=new i(t);this.images.push(e)},s.prototype.check=function(){function t(t,e){return n.options.debug&&f&&c.log("confirm",t,e),n.progress(t),++i===o&&n.complete(),!0}var n=this,i=0,o=this.images.length;if(this.hasAnyBroken=!1,o)for(var e=0;e<o;e++){var r=this.images[e];r.on("confirm",t),r.check()}else this.complete()},s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var n=this;setTimeout(function(){if(n.emit(e,n),n.emit("always",n),n.jqDeferred){var t=n.hasAnyBroken?"reject":"resolve";n.jqDeferred[t](n)}})},u&&(u.fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(u(this))}),(i.prototype=new e).check=function(){var t=p[this.img.src]||new a(this.img.src);if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else if(this.img.complete&&void 0!==this.img.naturalWidth)this.confirm(0!==this.img.naturalWidth,"naturalWidth");else{var n=this;t.on("confirm",function(t,e){return n.confirm(t.isLoaded,e),!0}),t.check()}},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var p={};return(a.prototype=new e).check=function(){if(!this.isChecked){var t=new Image;n.bind(t,"load",this),n.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},a.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},a.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},a.prototype.unbindProxyEvents=function(t){n.unbind(t.target,"load",this),n.unbind(t.target,"error",this)},s}),function(L){"use strict";var e=function(){var b=L(window).height(),y=spuvar.is_admin,_=spuvar.is_preview,x=[];function d(t){var e=x[t],n=L(window).width(),i=L(window).height(),o=e.outerHeight(),r=e.outerWidth(),s=e.data("width"),a=0,u=i/2-o/2,c="fixed",f=L(document).scrollTop();e.hasClass("spu-centered")&&(s<n&&(a=n/2-r/2),e.css({left:a,position:c,top:u})),i<o+50&&(c="absolute",u=f,e.css({position:c,top:u,bottom:"auto"}))}function p(t){var e=t,n=e.data("total");if(n){!function(){if("undefined"!=typeof spuvar_social&&spuvar_social.facebook)try{FB.XFBML.parse()}catch(t){}if("undefined"!=typeof spuvar_social&&spuvar_social.google)try{gapi.plusone.go()}catch(t){}if("undefined"!=typeof spuvar_social&&spuvar_social.twitter)try{twttr.widgets.load()}catch(t){}}();var i=0,o=0,r=e.outerWidth(),s=e.find(".spu-content").width();!spuvar.disable_style&&L(window).width()>r&&(e.find(".spu-shortcode").wrapAll('<div class="spu_shortcodes"/>'),e.find(".spu-shortcode").each(function(){i+=L(this).outerWidth()}),o=s-i-20*n),0<o&&(e.find(".spu-shortcode").each(function(){L(this).css("margin-left",o/2)}),2==n?e.find(".spu-shortcode").last().css("margin-left",0):3==n&&e.find(".spu-shortcode").first().css("margin-left",0))}}function E(t,e,n){var i=x[t],o=L("#spu-bg-"+t),r=i.data("bgopa");if(i.is(":animated"))return!1;if(!0===e&&i.is(":visible")||!1===e&&i.is(":hidden"))return!1;if(!1===e){var s=parseFloat(i.data("dclose-cookie")),a=i.data("nclose-cookie");!0===n&&(s=parseFloat(i.data("dconvert-cookie")),a=i.data("nconvert-cookie")),0<s&&function(t,e,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var o="; expires="+i.toGMTString()}else var o="";document.cookie=t+"="+e+o+"; path=/"}(a+"_"+t,!0,s),i.trigger("spu.box_close",[t]);var u=i.find('iframe[src*="vimeo"],iframe[src*="youtube"]');u&&u.length&&i.remove()}else setTimeout(function(){p(i)},1500),i.trigger("spu.box_open",[t]),L(window).resize(function(){d(t)}),d(t);var c=i.data("spuanimation"),f=i.data("close-on-conversion");return"fade"===c?!0===e?i.fadeIn("slow"):!1===e&&(f&&n||!n)&&i.fadeOut("slow"):"disable"===c?!0===e?i.show():!1===e&&(f&&n||!n)&&i.hide():!0===e?i.slideDown("slow"):!1===e&&(f&&n||!n)&&i.slideUp("slow"),!0===e&&0<r?"disable"===c?o.show():o.fadeIn():!1===e&&(f&&n||!n)&&("disable"===c?o.hide():o.fadeOut()),e}return L(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),L(".spu-box").each(function(){spuvar.safe_mode&&L(this).prependTo("body");var u=L(this),t=u.data("trigger"),e=0,n=1===parseInt(u.data("test-mode")),c=u.data("box-id"),i=1===parseInt(u.data("auto-hide")),o=(parseInt(u.data("seconds-close")),parseInt(u.data("trigger-number"),10)),r=("percentage"==t?parseInt(u.data("trigger-number"),10)/100:.8)*L(document).height();!function(t){var e=L(t).find(".spu-facebook");if(e.length){var n=e.find(".fb-like > span").width();if(0==n){var i=e.find(".fb-like").data("layout");"box_count"==i?e.append('<style type="text/css"> #'+L(t).attr("id")+" .fb-like iframe, #"+L(t).attr("id")+" .fb_iframe_widget span, #"+L(t).attr("id")+" .fb_iframe_widget{ height: 63px !important;width: 80px !important;}</style>"):"button_count"==i?e.append('<style type="text/css"> #'+L(t).attr("id")+" .fb-like iframe, #"+L(t).attr("id")+" .fb_iframe_widget span, #"+L(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;min-width: 120px !important;}</style>"):e.append('<style type="text/css"> #'+L(t).attr("id")+" .fb-like iframe, #"+L(t).attr("id")+" .fb_iframe_widget span, #"+L(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;width: 80px !important;}</style>")}}}(u),u.on("click",'a:not(".spu-close-popup, .flp_wrapper a, .spu-not-close, .spu-not-close a")',function(){E(c,!1,!0)}),L(document).keyup(function(t){27==t.keyCode&&E(c,!1,!1)});var s=navigator.userAgent,a=s.match(/iPad/i)||s.match(/iPhone/i)?"touchstart":"click";L("body").on(a,function(t){var e=L(t.target);void 0===t.originalEvent||L.contains(u,e)&&e.is("input")||E(c,!1,!1)}),L("body").on(a,".spu-box,.spu-clickable",function(t){t.stopPropagation()}),u.hide().css("left",""),x[c]=u;var f=function(){e&&clearTimeout(e),e=window.setTimeout(function(){var t=L(window).scrollTop();r<=t+b?(i||L(window).unbind("scroll",f),E(c,!0,!1)):E(c,!1,!1)},100)},d=function(){e&&clearTimeout(e),e=window.setTimeout(function(){var t=L(window).scrollTop();o<=t?(i||L(window).unbind("scroll",d),E(c,!0,!1)):E(c,!1,!1)},100)},p=u.data("nclose-cookie"),l=u.data("nconvert-cookie"),h=k(p+"_"+c),m=k(l+"_"+c);((null==h||""==h)&&(null==m||""==m)||y&&n||_)&&("seconds"==t&&(e&&clearTimeout(e),e=window.setTimeout(function(){E(c,!0,!1)},1e3*o)),"percentage"==t&&(L(window).bind("scroll",f),f()),"pixels"==t&&(L(window).bind("scroll",d),d()),window.location.hash&&0<window.location.hash.length&&window.location.hash.substring(1)===u.attr("id")&&setTimeout(function(){E(c,!0,!1)},100));u.on("click",".spu-close-popup",function(){E(c,!1,!1),"percentage"==t&&L(window).unbind("scroll",f)}),L(document.body).on("click",'a[href="#spu-'+c+'"], .spu-open-'+c,function(t){t.preventDefault(),E(c,!0,!1)}),L('a[href="#spu-'+c+'"], .spu-open-'+c).css("cursor","pointer").addClass("spu-clickable"),u.find(".gform_wrapper form").addClass("gravity-form"),u.find(".mc4wp-form form").addClass("mc4wp-form"),u.find(".newsletter form").addClass("newsletter-form");var v=u.find("form");if(v.length){if(!v.is(".newsletter-form, .wpcf7-form, .gravity-form, .infusion-form, .widget_wysija, .ninja-forms-form")){var g=v.attr("action"),w=new RegExp(spuvar.site_url,"i");g&&g.length&&(w.test(g)||v.addClass("spu-disable-ajax"))}L(".spu-disable-ajax form").length&&L(".spu-disable-ajax form").addClass("spu-disable-ajax"),u.on("submit",'form.spu-disable-ajax:not(".flp_form")',function(){u.trigger("spu.form_submitted",[c]),E(c,!1,!0)}),u.on("submit",'form:not(".newsletter-form, .wpcf7-form, .gravity-form, .infusion-form, .spu-disable-ajax, .widget_wysija, .ninja-forms-form, .flp_form")',function(t){t.preventDefault();var e=L(this),n=e.find('input[type="submit"]'),i=n?n.attr("name")+"="+n.val():"button=send",o=e.serialize()+"&"+i,r=e.find('input[name="_wp_http_referer"]'),s=r?spuvar.site_url+r.val():window.location.href,a=e.attr("action")?e.attr("action"):s;return j(o,e.hasClass("mc4wp-form")?spuvar.site_url+"/":a,function(t){var e=L(t).filter("#spu-"+c).html();L("#spu-"+c).html(e),L("#spu-"+c).find(".mc4wp-alert").length||setTimeout(function(){E(c,!1,!0)},1e3*spuvar.seconds_confirmation_close)},function(t,e,n){console.log("Spu Form error: "+e+" - "+n)},"html"),u.trigger("spu.form_submitted",[c]),!0}),L(document).on("wpcf7mailsent",function(){u.trigger("spu.form_submitted",[c]),E(c,!1,!0)}),v.hasClass("gravity-form")&&v.attr("action",window.location.href),L(document).on("gform_confirmation_loaded",function(){u.trigger("spu.form_submitted",[c]),E(c,!1,!0)}),u.on("submit",".infusion-form",function(t){t.preventDefault(),u.trigger("spu.form_submitted",[c]),E(c,!1,!0),this.submit()}),u.on("submit",".newsletter-form",function(t){t.preventDefault(),u.trigger("spu.form_submitted",[c]),E(c,!1,!0),this.submit()}),L("body").on("submitResponse.default",function(){u.trigger("spu.form_submitted",[c]),E(c,!1,!0)})}u.find(".nf-form-cont").length&&L(document).on("nfFormSubmitResponse",function(){u.trigger("spu.form_submitted",[c]),setTimeout(function(){E(c,!1,!0)},1e3*spuvar.seconds_confirmation_close)})}),{show:function(t){return E(t,!0,!1)},hide:function(t,e,n){return E(t,!1,n)},request:function(t,e,n,i){return j(t,e,n,i)}}};if(spuvar.ajax_mode){j({pid:spuvar.pid,referrer:document.referrer,query_string:document.location.search,is_category:spuvar.is_category,is_archive:spuvar.is_archive,is_preview:spuvar.is_preview},spuvar.ajax_mode_url,function(t){L("body").append(t),L(".spu-box").imagesLoaded(function(){window.SPU=e(),L(".spu-box form").each(function(){var t=L(this).attr("action");t&&L(this).attr("action",t.replace("?spu_action=spu_load",""))}),L.fn.wpcf7InitForm&&L(".spu-box div.wpcf7 > form").wpcf7InitForm()})},function(t,e,n){console.log("Problem loading popups - error: "+e+" - "+n)},"html")}else L(".spu-box").imagesLoaded(function(){window.SPU=e()});function j(t,e,n,i,o){var r={url:spuvar.ajax_url,data:t,cache:!1,type:"POST",dataType:"json",timeout:3e4};o=o||!1,n=n||!1,i=i||!1;e&&(r.url=e),n&&(r.success=n),i&&(r.error=i),o&&(r.dataType=o),L.ajax(r)}function k(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return null}var t=!1,n=setInterval(function(){"undefined"==typeof FB||t||function(){try{FB.Event.subscribe("edge.create",function(t,e){var n=L(e).parents(".spu-box").data("box-id");n&&SPU.hide(n,!1,!0)})}catch(t){}t=!0,clearInterval(n)}()},1e3);if("undefined"!=typeof twttr)try{twttr.ready(function(t){t.events.bind("tweet",i),t.events.bind("follow",i)})}catch(t){}function i(t){var e=L(t.target).parents(".spu-box").data("box-id");e&&SPU.hide(e,!1,!0)}}(jQuery);